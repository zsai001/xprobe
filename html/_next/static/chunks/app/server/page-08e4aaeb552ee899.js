(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[18],{2116:function(e,t,a){Promise.resolve().then(a.bind(a,2799))},2799:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return m}});var r=a(7437),n=a(2265),s=a(6463),o=a(83),i=e=>{let{serverData:t}=e,[a,s]=(0,n.useState)("day"),[i,c]=(0,n.useState)([]),[l,d]=(0,n.useState)([]);(0,n.useEffect)(()=>{u(a)},[a]);let u=async e=>{let t=m(e);c(t.probes),d(t.times)},m=e=>{let t,a;let r=[],n=["阿里云深圳 | v4","Ali-DNS","Tencent-DNS","Cloudflare-DNS","Google-DNS"].map(e=>({name:e,data:[]})),s=new Date;switch(e){case"day":t=24,a=36e5;break;case"month":t=30,a=864e5;break;case"year":t=12,a=2592e6}for(let e=t-1;e>=0;e--){let t=new Date(s.getTime()-e*a);r.push(t.toLocaleString()),n.forEach(e=>{e.data.push(10*Math.random()+5)})}return{probes:n,times:r}},h={title:{text:"Home-Core",subtext:"5 Services",left:"left",top:"top"},tooltip:{trigger:"axis",formatter:function(e){let t=e[0].axisValue+"<br/>";return e.forEach(e=>{t+=e.marker+" "+e.seriesName+": "+e.value.toFixed(3)+"ms<br/>"}),t}},legend:{data:i.map(e=>e.name),bottom:0},grid:{left:"3%",right:"4%",bottom:"10%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:l,axisLabel:{rotate:45,fontSize:10}},yAxis:{type:"value",axisLabel:{formatter:"{value} ms"},splitLine:{show:!0,lineStyle:{type:"dashed"}}},series:i.map(e=>({name:e.name,type:"line",data:e.data,smooth:!0,showSymbol:!1,lineStyle:{width:1}}))};return(0,r.jsxs)("div",{className:"space-y-4 bg-white rounded-lg shadow-md p-6",children:[(0,r.jsxs)("div",{className:"grid grid-cols-6 gap-4 mb-4",children:[(0,r.jsxs)("div",{className:"col-span-1",children:[(0,r.jsx)("h3",{className:"font-bold",children:"Home-Core"}),(0,r.jsx)("p",{className:"text-sm text-gray-500",children:"5 Services"})]}),i.map((e,t)=>(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("h4",{className:"font-semibold text-sm",children:e.name}),(0,r.jsxs)("p",{className:"text-lg",children:[e.data[e.data.length-1].toFixed(2),"ms"]})]},t))]}),(0,r.jsx)(o.Z,{option:h,style:{height:"400px"}}),(0,r.jsxs)("div",{className:"flex justify-center space-x-4 mt-4",children:[(0,r.jsx)("button",{onClick:()=>s("day"),className:"px-4 py-2 rounded ".concat("day"===a?"bg-blue-500 text-white":"bg-gray-200"),children:"日"}),(0,r.jsx)("button",{onClick:()=>s("month"),className:"px-4 py-2 rounded ".concat("month"===a?"bg-blue-500 text-white":"bg-gray-200"),children:"月"}),(0,r.jsx)("button",{onClick:()=>s("year"),className:"px-4 py-2 rounded ".concat("year"===a?"bg-blue-500 text-white":"bg-gray-200"),children:"年"})]})]})},c=a(2800);let l=e=>{let{active:t,onClick:a,children:n}=e;return(0,r.jsx)("button",{className:"px-4 py-2 text-sm font-medium transition-all duration-200 border-b-2 ".concat(t?"text-primary border-primary":"text-gray-500 border-transparent hover:text-gray-700 hover:border-gray-300"),onClick:a,children:n})};var d=e=>{let{id:t}=e,[a,s]=(0,n.useState)(null),[o,d]=(0,n.useState)(!0),[u,m]=(0,n.useState)("monitoring");return((0,n.useEffect)(()=>{(async()=>{if(t){d(!0);try{let e=await (0,c.SC)("/api/servers/".concat(t));s(e)}catch(e){console.error("Error fetching server data:",e)}finally{d(!1)}}})()},[t]),t)?o?(0,r.jsx)("div",{className:"container mx-auto p-4",children:"加载中..."}):a?(0,r.jsx)("div",{className:"container mx-auto p-4",children:(0,r.jsxs)("div",{className:"bg-card text-card-foreground shadow-md rounded-lg border border-border overflow-hidden",children:[(0,r.jsx)("div",{className:"flex justify-center space-x-1 bg-gray-100 p-2",children:(0,r.jsx)(l,{active:"monitoring"===u,onClick:()=>m("monitoring"),children:"监控"})}),(0,r.jsx)("div",{className:"p-6",children:"monitoring"===u&&(0,r.jsx)(i,{serverData:a})})]})}):(0,r.jsx)("div",{className:"container mx-auto p-4",children:"无法加载服务器数据"}):(0,r.jsx)("div",{className:"container mx-auto p-4",children:"未提供服务器 ID"})};let u=()=>{let e=(0,s.useSearchParams)().get("id");return(0,r.jsx)(d,{id:e})};var m=()=>(0,r.jsx)(n.Suspense,{fallback:(0,r.jsx)("div",{className:"container mx-auto p-4",children:"加载中..."}),children:(0,r.jsx)(u,{})})},2800:function(e,t,a){"use strict";a.d(t,{LP:function(){return n},SC:function(){return i},gy:function(){return o},o4:function(){return s}});let r=(()=>{{let e=window.location.protocol,t=window.location.host;return"".concat(e,"//").concat(t)}})(),n=()=>localStorage.getItem("token"),s=e=>{localStorage.setItem("token",e)},o=()=>{localStorage.removeItem("token")},i=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a="".concat(r).concat(e),i=n(),c=new Headers(t.headers||{});c.set("Content-Type","application/json"),i&&c.set("Authorization","Bearer ".concat(i));let l=await fetch(a,{...t,headers:c}),d=l.headers.get("X-New-Token");if(d&&s(d),!l.ok){if(401===l.status)throw o(),Error("Session expired. Redirecting to login page.");throw Error("HTTP error! status: ".concat(l.status))}return l.json()}}},function(e){e.O(0,[727,971,23,744],function(){return e(e.s=2116)}),_N_E=e.O()}]);